{"version":3,"sources":["tree/elbow/LinkVerticalElbow.js","tree/elbow/LinkHorizontalElbow.js","tree/Link.tsx","tree/utils.ts","tree/Links.tsx","tree/Node.tsx","tree/Nodes.tsx","tree/Tree.tsx","tree/ScaledTree.tsx","tree/index.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["LinkVerticalElbow","_ref","className","innerRef","data","_ref$x","before","after","x","d","_ref$y","y","restProps","Object","objectWithoutProperties","react_default","a","createElement","assign","ref","cx","source","target","b","Math","abs","tan","PI","c","sqrt","pow","concat","line","Link","props","LinkComponent","linkType","layout","orientation","stepPercent","LinkRadialStep","LinkRadialCurve","LinkRadialLine","LinkRadial","LinkVerticalStep","LinkVerticalCurve","LinkVerticalLine","LinkVertical","LinkHorizontalStep","LinkHorizontalCurve","LinkHorizontalLine","LinkHorizontalElbow","LinkHorizontal","percent","stroke","strokeWidth","fill","findCollapsedParent","node","isExpanded","parent","getTopLeft","_pointRadial","pointRadial","_pointRadial2","slicedToArray","radialX","top","left","depth","renderWidth","renderHeight","Links","links","selectedRoute","es","keyAccessor","i","id","start","x0","y0","enter","_ref2","update","_ref3","leave","_ref4","collapsedParent","nodes","vx_group_es","sort","Number","includes","map","_ref5","key","state","tree_Link","some","rectOffset","Node","children","onNodeClick","onNodeDoubleClick","onNodeHover","onNodeMouseEnter","onNodeMouseLeave","operations","_useState","useState","undefined","_useState2","rect","setRect","width","height","refCallback","useRef","useLayoutEffect","current","elementRect","getBoundingClientRect","events","React","useMemo","ev","ops","stopPropagation","expandNode","console","log","react","r","length","onClick","e","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave","selected","strokeDasharray","strokeOpacity","rx","dy","fontSize","fontFamily","textAnchor","style","pointerEvents","name","NodesMove","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","prioritizedData","renderRects","compareRects","newRenderRects","toConsumableArray","forceUpdate","prevProps","_this2","_this$props","nodeChildren","NodeGroup_default","parentTopLeft","opacity","topLeft","collapsedParentPrevPos","objectSpread","tree_Node","Component","TreeView","_props$margin","margin","right","bottom","onCanvasClick","onCanvasDoubleClick","onCanvasHover","onCanvasMouseEnter","onCanvasMouseLeave","_React$useState3","_React$useState4","setlayout","_React$useState5","_React$useState6","setOrientation","_React$useState7","_React$useState8","setLinkType","_React$useState9","_React$useState10","setStepPercent","_React$useState11","_React$useState12","_React$useMemo","_React$useMemo2","effectiveWidth","effectiveHeight","_React$useMemo3","_React$useMemo4","innerWidth","innerHeight","_React$useMemo5","origin","sizeWidth","sizeHeight","min","_React$useMemo6","newRoot","hierarchy","rs","selectedNode","descendants","find","route","ancestors","forEach","push","JSON","stringify","_React$useMemo7","root","routeSelected","forceRefresh","prev","addNode","shortId","generate","removeNode","parentNode","filter","collapseAll","selector","expandAll","onChange","value","disabled","type","max","step","vx_gradient_es","from","to","vx_hierarchy_es","size","separation","tree_Links","Nodes","styles","createStyles","rootDiv","backgroundColor","alignItems","resize","overflow","withStyles","_React$useState","_React$useState2","setWidth","setHeight","index_esm","bounds","onResize","measureRef","classes","Tree","AnimatedPlus","cicleSpring","useSpring","plusSpring","Fragment","web","circle","cy","svg","xmlns","viewBox","AnimatedBin","CustomizedView","tree_ScaledTree","setState","n","preventDefault","tree_AnimatedPlus","tree_AnimatedBin","App","tree","Boolean","window","location","hostname","match","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.bc9a2aeb.chunk.js","sourcesContent":["import React from 'react';\r\nimport cx from 'classnames';\r\nimport PropTypes from 'prop-types';\r\n\r\nLinkVerticalElbow.propTypes = {\r\n  innerRef: PropTypes.func,\r\n  before: PropTypes.bool,\r\n  after: PropTypes.bool\r\n};\r\n\r\nexport default function LinkVerticalElbow({\r\n  className,\r\n  innerRef,\r\n  data,\r\n  before,\r\n  after,\r\n  x = d => d.x,\r\n  y = d => d.y,\r\n  ...restProps\r\n}) {\r\n  \r\n  const line = (source, target) => {\r\n    var b = target.y - source.y;\r\n    var a = Math.abs(Math.tan(Math.PI / 4) * b);\r\n    var c = target.x - source.x;\r\n\r\n    var h = Math.sqrt(Math.pow(b, 2) + Math.pow(c, 2));\r\n    var ab = Math.sqrt(Math.pow(a, 2) + Math.pow(b, 2));\r\n\r\n    /* \r\n      Check if the line between the two points is less than \r\n      the hypotenuse between a and b\r\n    */\r\n    if (h < ab) {\r\n      a = target.x - source.x;\r\n      b = Math.abs(Math.tan(Math.PI / 4) * a);\r\n\r\n      if ((target.y - source.y) < 0) {\r\n        b = -b;;\r\n      }\r\n    } else {\r\n      if ((target.x - source.x) < 0) {\r\n        a = -a;\r\n      }\r\n    }\r\n    \r\n    return `\r\n      M${x(source)},${y(source)}\r\n      L${a},${b}\r\n      L${x(target)},${y(target)}\r\n    `;\r\n  }\r\n\r\n  return (\r\n    <path\r\n      ref={innerRef}\r\n      className={cx('vx-link', className)}\r\n      d={line(data.source, data.target)}\r\n      {...restProps}\r\n    />\r\n  );\r\n}\r\n","import React from 'react';\r\nimport cx from 'classnames';\r\nimport PropTypes from 'prop-types';\r\n\r\nLinkVerticalElbow.propTypes = {\r\n  innerRef: PropTypes.func,\r\n  before: PropTypes.bool,\r\n  after: PropTypes.bool\r\n};\r\n\r\nexport default function LinkVerticalElbow({\r\n  className,\r\n  innerRef,\r\n  data,\r\n  before,\r\n  after,\r\n  x = d => d.y,\r\n  y = d => d.x,\r\n  ...restProps\r\n}) {\r\n\r\n  const line = (source, target) => {\r\n    var b = target.y - source.y;\r\n    var a = Math.abs(Math.tan(Math.PI / 4) * b);\r\n    var c = target.x - source.x;\r\n\r\n    var h = Math.sqrt(Math.pow(b, 2) + Math.pow(c, 2));\r\n    var ab = Math.sqrt(Math.pow(a, 2) + Math.pow(b, 2));\r\n\r\n    /* \r\n      Check if the line between the two points is less than \r\n      the hypotenuse between a and b\r\n    */\r\n    // if (h < ab) {\r\n    //   a = target.x - source.x;\r\n    //   b = Math.abs(Math.tan(Math.PI / 4) * a);\r\n\r\n    //   if ((target.y - source.y) < 0) {\r\n    //     b = -b;;\r\n    //   }\r\n    // } else {\r\n    //   if ((target.x - source.x) < 0) {\r\n    //     a = -a;\r\n    //   }\r\n    // }\r\n\r\n    return `\r\n      M${x(source)},${y(source)}\r\n      L${x(source) + a},${x(source) + b}\r\n      L${x(target)},${y(target)}\r\n    `;\r\n    // return { a, b }\r\n  }\r\n\r\n  return (\r\n    <path\r\n      ref={innerRef}\r\n      className={cx('vx-link', className)}\r\n      d={line(data.source, data.target)}\r\n      {...restProps}\r\n    />\r\n  )\r\n\r\n  // const { a, b } = line(data.source, data.target);\r\n  // return (\r\n  //   <circle r={5} cx={a} cy={b} fill=\"#ccc\" />\r\n  // )\r\n}\r\n","import React, { FC, ComponentType } from \"react\";\r\n\r\nimport {\r\n\tLinkHorizontal,\r\n\tLinkVertical,\r\n\tLinkRadial,\r\n\tLinkHorizontalStep,\r\n\tLinkVerticalStep,\r\n\tLinkRadialStep,\r\n\tLinkHorizontalCurve,\r\n\tLinkVerticalCurve,\r\n\tLinkRadialCurve,\r\n\tLinkHorizontalLine,\r\n\tLinkVerticalLine,\r\n\tLinkRadialLine,\r\n} from \"@vx/shape\";\r\nimport { LinkHorizontalElbow, LinkVerticalElbow } from \"./elbow\";\r\nimport { LinkProps } from \"./types\";\r\n\r\nconst Link: FC<LinkProps> = (props: LinkProps) => {\r\n\tconst {\r\n\t\tdata,\r\n\t\tlinkType,\r\n\t\tlayout,\r\n\t\torientation,\r\n\t\tstepPercent,\r\n\t\t...restProps\r\n\t} = props;\r\n\tlet LinkComponent:any; //need to find a better way to handle its dynamic nature\r\n\tif (layout === \"polar\") {\r\n\t\tif (linkType === \"step\") {\r\n\t\t\tLinkComponent = LinkRadialStep;\r\n\t\t} else if (linkType === \"curve\") {\r\n\t\t\tLinkComponent = LinkRadialCurve;\r\n\t\t} else if (linkType === \"line\") {\r\n\t\t\tLinkComponent = LinkRadialLine;\r\n\t\t} else {\r\n\t\t\tLinkComponent = LinkRadial;\r\n\t\t}\r\n\t} else {\r\n\t\tif (orientation === \"vertical\") {\r\n\t\t\tif (linkType === \"step\") {\r\n\t\t\t\tLinkComponent = LinkVerticalStep;\r\n\t\t\t} else if (linkType === \"curve\") {\r\n\t\t\t\tLinkComponent = LinkVerticalCurve;\r\n\t\t\t} else if (linkType === \"line\") {\r\n\t\t\t\tLinkComponent = LinkVerticalLine;\r\n\t\t\t} else if (linkType === \"elbow\") {\r\n\t\t\t\tLinkComponent = LinkVerticalElbow;\r\n\t\t\t} else {\r\n\t\t\t\tLinkComponent = LinkVertical;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (linkType === \"step\") {\r\n\t\t\t\tLinkComponent = LinkHorizontalStep;\r\n\t\t\t} else if (linkType === \"curve\") {\r\n\t\t\t\tLinkComponent = LinkHorizontalCurve;\r\n\t\t\t} else if (linkType === \"line\") {\r\n\t\t\t\tLinkComponent = LinkHorizontalLine;\r\n\t\t\t} else if (linkType === \"elbow\") {\r\n\t\t\t\tLinkComponent = LinkHorizontalElbow;\r\n\t\t\t} else {\r\n\t\t\t\tLinkComponent = LinkHorizontal;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif (layout === \"polar\") {\r\n\t\tif (linkType === \"step\") {\r\n\t\t\tLinkComponent = LinkRadialStep;\r\n\t\t} else if (linkType === \"curve\") {\r\n\t\t\tLinkComponent = LinkRadialCurve;\r\n\t\t} else if (linkType === \"line\") {\r\n\t\t\tLinkComponent = LinkRadialLine;\r\n\t\t} else {\r\n\t\t\tLinkComponent = LinkRadial;\r\n\t\t}\r\n\t} else {\r\n\t\tif (orientation === \"vertical\") {\r\n\t\t\tif (linkType === \"step\") {\r\n\t\t\t\tLinkComponent = LinkVerticalStep;\r\n\t\t\t} else if (linkType === \"curve\") {\r\n\t\t\t\tLinkComponent = LinkVerticalCurve;\r\n\t\t\t} else if (linkType === \"line\") {\r\n\t\t\t\tLinkComponent = LinkVerticalLine;\r\n\t\t\t} else if (linkType === \"elbow\") {\r\n\t\t\t\tLinkComponent = LinkVerticalElbow;\r\n\t\t\t} else {\r\n\t\t\t\tLinkComponent = LinkVertical;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (linkType === \"step\") {\r\n\t\t\t\tLinkComponent = LinkHorizontalStep;\r\n\t\t\t} else if (linkType === \"curve\") {\r\n\t\t\t\tLinkComponent = LinkHorizontalCurve;\r\n\t\t\t} else if (linkType === \"line\") {\r\n\t\t\t\tLinkComponent = LinkHorizontalLine;\r\n\t\t\t} else if (linkType === \"elbow\") {\r\n\t\t\t\tLinkComponent = LinkHorizontalElbow;\r\n\t\t\t} else {\r\n\t\t\t\tLinkComponent = LinkHorizontal;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n    return (\r\n        <LinkComponent\r\n          data={data}\r\n          percent={stepPercent}\r\n          stroke=\"#374469\"\r\n          strokeWidth=\"1\"\r\n          fill=\"none\"\r\n          {...restProps}\r\n        />\r\n      );\r\n};\r\n\r\nexport default Link;","import { TreeNode } from './types';\r\nimport { pointRadial } from \"d3-shape\";\r\n\r\nexport const findCollapsedParent =(node:TreeNode):TreeNode|null=> {\r\n\tif (!node.data.isExpanded || !node.parent) {\r\n\t\treturn node;\r\n\t} else if (node.parent) {\r\n\t\treturn findCollapsedParent(node.parent);\r\n\t} else {\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nexport const getTopLeft = (node:TreeNode, layout:string, orientation:string) => {\r\n\r\n\tif (layout === \"polar\") {\r\n\t\tconst [radialX, radialY] = pointRadial(node.x, node.y);\r\n\t\treturn {\r\n\t\t\ttop: radialY,\r\n\t\t\tleft: radialX\r\n\t\t};\r\n\t} else if (orientation === \"vertical\") {\r\n\t\treturn {\r\n\t\t\ttop: node.y - ((node.data && (node.depth===0? -1*node.data.renderWidth!:node.data.renderHeight!)/2)|| 0),\r\n\t\t\tleft: node.x \r\n\t\t};\r\n\t} else {\r\n\t\treturn {\r\n\t\t\ttop: node.x,\r\n\t\t\tleft: node.y - ((node.depth===0? -1:1)*(node.data && node.data.renderWidth! / 2) || 0)\r\n\t\t};\r\n\t}\r\n}\r\n","import React, { FC } from \"react\";\r\nimport { Group } from \"@vx/group\";\r\nimport { NodeGroup } from \"react-move\";\r\nimport Link from \"./Link\";\r\nimport { findCollapsedParent } from \"./utils\";\r\nimport { LinksProps } from \"./types\";\r\n\r\nconst Links: FC<LinksProps> = (props: LinksProps) => {\r\n\tconst { links, linkType, layout, orientation, stepPercent, selectedRoute } = props;\r\n\r\n\treturn (\r\n\t\t<NodeGroup\r\n\t\t\tdata={links}\r\n\t\t\tkeyAccessor={(d, i) =>\r\n\t\t\t\t`${d.source.data.id}_${d.target.data.id}`\r\n\t\t\t}\r\n\t\t\tstart={({ source, target }) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tsource: {\r\n\t\t\t\t\t\tx: source.data.x0 || source.x,\r\n\t\t\t\t\t\ty: source.data.y0 || source.y\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttarget: {\r\n\t\t\t\t\t\tx: source.data.x0 || source.x,\r\n\t\t\t\t\t\ty: source.data.y0 || source.y\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}}\r\n\t\t\tenter={({ source, target }) => {\r\n\t\t\t\tif (layout === \"polar\") {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tsource: {\r\n\t\t\t\t\t\t\tx: [source.x],\r\n\t\t\t\t\t\t\ty: [source.y]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttarget: {\r\n\t\t\t\t\t\t\tx: [target.x],\r\n\t\t\t\t\t\t\ty: [target.y]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\treturn {\r\n\t\t\t\t\tsource: {\r\n\t\t\t\t\t\tx: [source.x],\r\n\t\t\t\t\t\ty: [\r\n\t\t\t\t\t\t\torientation === \"vertical\"\r\n\t\t\t\t\t\t\t\t? source.y\r\n\t\t\t\t\t\t\t\t: source.y -\r\n\t\t\t\t\t\t\t\t  ((source.depth === 0 ? -1 : 1) *\r\n\t\t\t\t\t\t\t\t\t\t(source.data &&\r\n\t\t\t\t\t\t\t\t\t\t\tsource.data.renderWidth / 2) || 0)\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttarget: {\r\n\t\t\t\t\t\tx: [target.x],\r\n\t\t\t\t\t\ty: [\r\n\t\t\t\t\t\t\torientation === \"vertical\"\r\n\t\t\t\t\t\t\t\t? target.y\r\n\t\t\t\t\t\t\t\t: target.y -\r\n\t\t\t\t\t\t\t\t  ((target.depth === 0 ? -1 : 1) *\r\n\t\t\t\t\t\t\t\t\t\t(target.data &&\r\n\t\t\t\t\t\t\t\t\t\t\ttarget.data.renderWidth / 2) || 0)\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}}\r\n\t\t\tupdate={({ source, target }) => {\r\n\t\t\t\tif (layout === \"polar\") {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tsource: {\r\n\t\t\t\t\t\t\tx: [source.x],\r\n\t\t\t\t\t\t\ty: [source.y]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttarget: {\r\n\t\t\t\t\t\t\tx: [target.x],\r\n\t\t\t\t\t\t\ty: [target.y]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tsource: {\r\n\t\t\t\t\t\tx: [source.x],\r\n\t\t\t\t\t\ty: [\r\n\t\t\t\t\t\t\torientation === \"vertical\"\r\n\t\t\t\t\t\t\t\t? source.y\r\n\t\t\t\t\t\t\t\t: source.y -\r\n\t\t\t\t\t\t\t\t  ((source.depth === 0 ? -1 : 1) *\r\n\t\t\t\t\t\t\t\t\t\t(source.data &&\r\n\t\t\t\t\t\t\t\t\t\t\tsource.data.renderWidth / 2) || 0)\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttarget: {\r\n\t\t\t\t\t\tx: [target.x],\r\n\t\t\t\t\t\ty: [\r\n\t\t\t\t\t\t\torientation === \"vertical\"\r\n\t\t\t\t\t\t\t\t? target.y\r\n\t\t\t\t\t\t\t\t: target.y -\r\n\t\t\t\t\t\t\t\t  ((target.depth === 0 ? -1 : 1) *\r\n\t\t\t\t\t\t\t\t\t\t(target.data &&\r\n\t\t\t\t\t\t\t\t\t\t\ttarget.data.renderWidth / 2) || 0)\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}}\r\n\t\t\tleave={({ source, target }) => {\r\n                const collapsedParent = findCollapsedParent(source);\r\n\t\t\t\treturn {\r\n\t\t\t\t\tsource: {\r\n\t\t\t\t\t\tx: [\r\n\t\t\t\t\t\t\tcollapsedParent!.data.x0 || collapsedParent!.x\r\n\t\t\t\t\t\t], //assume not null because root (only parentless node, will never leave)\r\n\t\t\t\t\t\ty: [collapsedParent!.data.y0 || collapsedParent!.y ]\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttarget: {\r\n\t\t\t\t\t\tx: [\r\n\t\t\t\t\t\t\tcollapsedParent!.data.x0 || collapsedParent!.x\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\ty: [collapsedParent!.data.y0 || collapsedParent!.y ]\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{nodes => (\r\n\t\t\t\t<Group>\r\n\t\t\t\t\t{nodes.sort((x, y)=>{\r\n                        const num = Number(selectedRoute.includes(x.data.target.data.id))-Number(selectedRoute.includes(y.data.target.data.id));\r\n                        return num; //weird exception was being thrown so expanded this??\r\n                    }).map(({ key, data, state }) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\tdata={state}\r\n\t\t\t\t\t\t\t\tlinkType={linkType}\r\n\t\t\t\t\t\t\t\tlayout={layout}\r\n\t\t\t\t\t\t\t\torientation={orientation}\r\n\t\t\t\t\t\t\t\tstepPercent={stepPercent}\r\n\t\t\t\t\t\t\t\tstroke={\r\n                                     selectedRoute.some(d=>data.source.data.id===d) && selectedRoute.some(d=>data.target.data.id===d)? \r\n\t\t\t\t\t\t\t\t\t\t \"#26deb0\"\r\n\t\t\t\t\t\t\t\t\t\t: \"#374469\"\r\n                                }\r\n                                strokeWidth=\"1\"\r\n\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\tkey={key}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t\t</Group>\r\n\t\t\t)}\r\n\t\t</NodeGroup>\r\n\t);\r\n};\r\n\r\nexport default Links;\r\n","import React, { Fragment, FC, useState, useRef, useLayoutEffect, cloneElement } from \"react\";\r\nimport { NodeProps, Vector2, NodeEvents } from \"./types\";\r\n\r\nconst rectOffset: Vector2 = {\r\n\tx: 20,\r\n\ty: 15\r\n};\r\n\r\nconst Node: FC<NodeProps> = props => {\r\n\tconst {\r\n\t    node,\r\n\t    onNodeClick,\r\n\t    onNodeDoubleClick,\r\n\t    onNodeHover,\r\n\t    onNodeMouseEnter,\r\n        onNodeMouseLeave,\r\n        children,\r\n        operations\r\n\t} = props;\r\n\tconst [rect, setRect] = useState<Vector2 | undefined>(undefined);\r\n\tconst width = (rect && rect.x) || 20;\r\n\tconst height = (rect && rect.y) || 20;\r\n\r\n\tconst refCallback = useRef<SVGTextElement>(null);\r\n\tuseLayoutEffect(() => {\r\n\t\t//see https://github.com/hshoff/vx/issues/375\r\n\t\tif (!refCallback.current) return;\r\n\t\tconst elementRect = refCallback.current.getBoundingClientRect();\r\n\t\tsetRect({\r\n\t\t\tx: elementRect.width + rectOffset.x,\r\n\t\t\ty: elementRect.height + rectOffset.y\r\n\t\t});\r\n\t\tnode.data.renderWidth = elementRect.width + rectOffset.x;\r\n\t\tnode.data.renderHeight = elementRect.height + rectOffset.y;\r\n    }, [refCallback]);\r\n    const events = React.useMemo<NodeEvents>(()=>{\r\n        return{\r\n             onNodeClick:props.onNodeClick||function(ev, node, ops){\r\n                ev.stopPropagation();\r\n                ops!.expandNode!(node);\r\n            },\r\n            onNodeDoubleClick:props.onNodeDoubleClick||function(ev, node, ops){\r\n                ev.stopPropagation();\r\n                console.log(\"onNodeDoubleClick undefined\")\r\n            },\r\n            onNodeHover:props.onNodeHover||function(ev, node, ops){\r\n\r\n            },\r\n            onNodeMouseEnter:props.onNodeMouseEnter||function(ev, node, ops){\r\n            },\r\n            onNodeMouseLeave:props.onNodeMouseLeave||function(ev, node, ops){\r\n            }\r\n        }\r\n    }, [props.onNodeClick, props.onNodeDoubleClick, props.onNodeHover, operations]);\r\n    \r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t{node.depth === 0 && (\r\n\t\t\t\t<circle\r\n\t\t\t\t\tr={width / 2}   \r\n                    fill=\"#ffffff\"\r\n                    stroke={node.data.children && node.data.children.length>0 ? '#00ffd8' : '#26deb0'}              \r\n                    onClick={e => events.onNodeClick && events.onNodeClick(e, node, operations)}\r\n                    onDoubleClick={e=>events.onNodeDoubleClick && events.onNodeDoubleClick(e, node, operations)}\r\n                    onMouseMove={e=>events.onNodeHover && events.onNodeHover(e, node, operations)}\r\n                    onMouseEnter={e=>events.onNodeMouseEnter && events.onNodeMouseEnter(e, node, operations)}\r\n                    onMouseLeave ={e=>events.onNodeMouseLeave && events.onNodeMouseLeave(e, node, operations)}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t\t{node.depth !== 0 && (\r\n\t\t\t\t<rect\r\n\t\t\t\t\theight={height}\r\n\t\t\t\t\twidth={width}\r\n\t\t\t\t\ty={-height / 2}\r\n                    x={-width / 2}\r\n                    fill={node.data.selected?\" #ffffff\": '#272b4d'}\r\n                    stroke={node.data.children ? '#03c0dc' : '#26deb0'}\r\n                    strokeWidth={node.data.selected? 1.25 : 1}\r\n                    strokeDasharray={node.data.children && node.data.children.length>0? '0': '2,2'}\r\n                    strokeOpacity={node.data.children  && node.data.children.length>0? 1 : 0.6}\r\n                    rx={node.data.children && node.data.children.length>0? 0 : 10}\r\n                    onClick={e => events.onNodeClick && events.onNodeClick(e, node, operations)}\r\n                    onDoubleClick={e=>events.onNodeDoubleClick && events.onNodeDoubleClick(e, node, operations)}\r\n                    onMouseMove={e=>events.onNodeHover && events.onNodeHover(e, node, operations)}\r\n                    onMouseEnter={e=>events.onNodeMouseEnter && events.onNodeMouseEnter(e, node, operations)}\r\n                    onMouseLeave ={e=>events.onNodeMouseLeave && events.onNodeMouseLeave(e, node, operations)}\r\n\t\t\t\t/>\r\n            )}\r\n            {children && children(node, operations)}\r\n\t\t\t<text\r\n\t\t\t\tdy={\".33em\"}\r\n\t\t\t\tfontSize={9}\r\n\t\t\t\tfontFamily=\"Arial\"\r\n\t\t\t\ttextAnchor={\"middle\"}\r\n\t\t\t\tstyle={{ pointerEvents: \"none\" }}\r\n\t\t\t\tref={refCallback}\r\n                fill={node.depth === 0 ? '#71248e' : node.children && node.children.length>0 ? (node.data.selected? '#71248e' :'white') : ('#26deb0')}\r\n\t\t\t>\r\n\t\t\t\t{node.data.name}\r\n\t\t\t</text>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nexport default Node;\r\n","import React, { Fragment, Component, FC } from \"react\";\r\nimport { Group } from \"@vx/group\";\r\nimport NodeGroup from \"react-move/NodeGroup\";\r\nimport Node from \"./Node\";\r\nimport { findCollapsedParent, getTopLeft } from \"./utils\";\r\nimport { NodesMoveProps, Vector2, TreeNode, NodeEvents } from \"./types\";\r\n\r\nclass NodesMove extends Component<NodesMoveProps> {\r\n\tconstructor(props: NodesMoveProps) {\r\n\t\tsuper(props);\r\n\t}\r\n\r\n\tprioritizedData: any[] | undefined = undefined;\r\n    renderRects: Vector2[] | undefined = undefined;\r\n\r\n    compareRects= () =>{\r\n\t\t//checks if positions are optimized for sizes, if not, rerenders\r\n\t\tconst newRenderRects: Vector2[] = this.props.nodes.map(i => ({\r\n\t\t\tx: i.data.renderWidth!,\r\n\t\t\ty: i.data.renderHeight!\r\n        }));\r\n\t\tif (!this.renderRects) return;\r\n\t\tif (this.renderRects === newRenderRects) return; //old comment on old impl was \"dont worry node-group already handles it https://react-move.js.org/#/component-api/node-group\" and im too afraid of deleting it now\r\n\r\n\t\tfor (let i = 0; i < this.renderRects.length; i++) {\r\n\t\t\tif (\r\n\t\t\t\tthis.renderRects[i].x !== newRenderRects[i].x ||\r\n\t\t\t\tthis.renderRects[i].y !== newRenderRects[i].y\r\n\t\t\t) {\r\n\t\t\t\tthis.prioritizedData = [...this.props.nodes];\r\n\t\t\t\tthis.forceUpdate();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.prioritizedData = undefined;\r\n    }\r\n    componentDidMount(){\r\n        this.compareRects();\r\n    }\r\n\tcomponentDidUpdate(prevProps: NodesMoveProps) {\r\n        const oldData = prevProps.nodes;\r\n\t\tif (!oldData) return;\r\n        this.compareRects();\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { nodes, layout, orientation, onNodeClick, operations, nodeChildren } = this.props;\r\n\t\tthis.renderRects = nodes.map(i => ({\r\n\t\t\tx: i.data.renderWidth!,\r\n\t\t\ty: i.data.renderHeight!\r\n        }));\r\n\t\treturn (\r\n\t\t\t<NodeGroup\r\n\t\t\t\tdata={this.prioritizedData || nodes}\r\n\t\t\t\tkeyAccessor={d => d.data.id}\r\n\t\t\t\tstart={node => {\r\n\t\t\t\t\tconst parentTopLeft = getTopLeft(\r\n\t\t\t\t\t\tnode.parent || { x: 0, y: 0 },\r\n\t\t\t\t\t\tlayout,\r\n\t\t\t\t\t\torientation\r\n\t\t\t\t\t);\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\ttop: parentTopLeft.top,\r\n\t\t\t\t\t\tleft: parentTopLeft.left,\r\n\t\t\t\t\t\topacity: 0\r\n\t\t\t\t\t};\r\n\t\t\t\t}}\r\n\t\t\t\tenter={node => {\r\n\t\t\t\t\tconst topLeft = getTopLeft(node, layout, orientation);\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\ttop: [topLeft.top],\r\n\t\t\t\t\t\tleft: [topLeft.left],\r\n\t\t\t\t\t\topacity: [1]\r\n\t\t\t\t\t};\r\n\t\t\t\t}}\r\n\t\t\t\tupdate={node => {\r\n\t\t\t\t\tconst topLeft = getTopLeft(node, layout, orientation);\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\ttop: [topLeft.top],\r\n\t\t\t\t\t\tleft: [topLeft.left],\r\n\t\t\t\t\t\topacity: [1]\r\n\t\t\t\t\t};\r\n\t\t\t\t}}\r\n\t\t\t\tleave={node => {\r\n\t\t\t\t\tconst collapsedParent = findCollapsedParent(node.parent);\r\n\t\t\t\t\tconst collapsedParentPrevPos:TreeNode = {\r\n                        ...collapsedParent!,//assume not null because root (only parentless node, will never leave)\r\n\t\t\t\t\t\tx: collapsedParent!.data.x0 || collapsedParent!.x,\r\n\t\t\t\t\t\ty: collapsedParent!.data.y0 || collapsedParent!.y\r\n\t\t\t\t\t};\r\n\t\t\t\t\tconst topLeft = getTopLeft(\r\n\t\t\t\t\t\tcollapsedParentPrevPos,\r\n\t\t\t\t\t\tlayout,\r\n\t\t\t\t\t\torientation\r\n\t\t\t\t\t);\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\ttop: [topLeft.top],\r\n\t\t\t\t\t\tleft: [topLeft.left],\r\n\t\t\t\t\t\topacity: [0]\r\n\t\t\t\t\t};\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t{nodes => (\r\n\t\t\t\t\t<Group>\r\n\t\t\t\t\t\t{nodes.sort((x, y)=>Number(x.data.data.selected||0)-Number(y.data.data.selected||0)).map(({ key, data: node, state }) => {\r\n\t\t\t\t\t\t\tconst width = 40;\r\n                            const height = 20;\r\n                            // console.log(nodes.sort((x, y)=>Number(x.data.data.selected||0)-Number(y.data.data.selected||0)))\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<Group\r\n\t\t\t\t\t\t\t\t\ttop={state.top}\r\n\t\t\t\t\t\t\t\t\tleft={state.left}\r\n\t\t\t\t\t\t\t\t\tkey={key}\r\n\t\t\t\t\t\t\t\t\topacity={state.opacity}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Node\r\n                                        operations={operations}\r\n\t\t\t\t\t\t\t\t\t\tnode={node}\r\n                                        key={key}\r\n                                        children={nodeChildren}\r\n                                        {...(this.props as NodeEvents)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Group>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Group>\r\n\t\t\t\t)}\r\n\t\t\t</NodeGroup>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default NodesMove;","import * as React from \"react\";\r\nimport { Group } from \"@vx/group\";\r\nimport { Tree, INode } from \"@vx/hierarchy\";\r\nimport { LinearGradient } from \"@vx/gradient\";\r\nimport { hierarchy } from \"d3-hierarchy\";\r\nimport Links from \"./Links\";\r\nimport Nodes from \"./Nodes\";\r\nimport _ from \"lodash\";\r\nimport { TreeProps, Vector2, TreeNode, TreeOperations, NodeEvents } from \"./types\";\r\nimport shortId from \"shortid\";\r\n\r\nconst useForceUpdate = () => {\r\n\tconst [, setState] = React.useState();\r\n\treturn setState;\r\n};\r\n\r\nconst selectedRoute = (node:TreeNode):(string|number)[] => {\r\n    const route:(string|number)[] = [];\r\n    node.ancestors().forEach(i=>route.push(i.data.id!))\r\n    return route;\r\n};\r\n\r\nconst TreeView: React.FC<TreeProps> = (props: TreeProps) => {\r\n\tconst {\r\n\t\tdata,\r\n\t\twidth,\r\n\t\theight,\r\n\t\tmargin = {\r\n\t\t\ttop: 24,\r\n\t\t\tleft: 24,\r\n\t\t\tright: 24,\r\n\t\t\tbottom: 24\r\n\t\t},\r\n        onCanvasClick,\r\n        onCanvasDoubleClick,\r\n        onCanvasHover,\r\n        onCanvasMouseEnter,\r\n        onCanvasMouseLeave,\r\n        nodeChildren\r\n\t} = props;\r\n\r\n\tconst [layout, setlayout] = React.useState<string>(\"cartesian\");\r\n\tconst [orientation, setOrientation] = React.useState<string>(\"horizontal\");\r\n\tconst [linkType, setLinkType] = React.useState<string>(\"diagonal\");\r\n\tconst [stepPercent, setStepPercent] = React.useState<number>(0.5);\r\n\tconst [r, forceUpdate] = React.useState<boolean>(false); //i know...\r\n\r\n\tconst [effectiveWidth, effectiveHeight] = React.useMemo(() => {\r\n\t\tconst fHeight = height - 28;\r\n\t\tconst fWidth = width;\r\n\t\treturn [fWidth, fHeight];\r\n\t}, [width, height]);\r\n\r\n\tconst [innerWidth, innerHeight] = React.useMemo(() => {\r\n\t\tconst iWidth = effectiveWidth - margin.left - margin.right;\r\n\t\tconst iHeight = effectiveHeight - margin.top - margin.bottom;\r\n\t\treturn [iWidth, iHeight];\r\n\t}, [effectiveWidth, effectiveHeight, margin]);\r\n\r\n\tconst { origin, sizeWidth, sizeHeight } = React.useMemo(() => {\r\n\t\tlet origin: Vector2;\r\n\t\tlet sizeWidth: number;\r\n\t\tlet sizeHeight: number;\r\n\t\tif (layout === \"polar\") {\r\n\t\t\torigin = {\r\n\t\t\t\tx: (innerWidth / 2)+24, //not completely sure why i have to do this but works\r\n\t\t\t\ty: (innerHeight / 2)+24\r\n\t\t\t};\r\n\t\t\tsizeWidth = 2 * Math.PI;\r\n\t\t\tsizeHeight = Math.min(innerWidth, innerHeight) / 2;\r\n\t\t} else {\r\n\t\t\tif (orientation === \"vertical\") {\r\n\t\t\t\torigin = { x: margin.top, y: margin.right };\r\n\t\t\t\tsizeWidth = innerWidth;\r\n\t\t\t\tsizeHeight = innerHeight;\r\n\t\t\t} else {\r\n\t\t\t\torigin = { x: margin.left, y: margin.top };\r\n\t\t\t\tsizeWidth = innerHeight;\r\n\t\t\t\tsizeHeight = innerWidth;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn {\r\n\t\t\torigin,\r\n\t\t\tsizeWidth,\r\n\t\t\tsizeHeight\r\n\t\t};\r\n    }, [layout, innerWidth, innerHeight, orientation]);\r\n\tconst [root, routeSelected] = React.useMemo(() => {\r\n        const newRoot = hierarchy(data, d => (d.isExpanded ? d.children : null));\r\n        let rs:(string|number)[] = [];\r\n        const selectedNode = newRoot.descendants().find(i=>i.data.selected) as TreeNode;\r\n        if(selectedNode)rs=selectedRoute(selectedNode);\r\n\t\treturn [newRoot, rs];\r\n    }, [JSON.stringify(data)]);\r\n\tconst forceRefresh = () => {\r\n\t\tforceUpdate(prev => !prev); \r\n    };\r\n\tconst operations = React.useMemo<TreeOperations>(() => {\r\n\t\treturn {\r\n\t\t\taddNode:\r\n\t\t\t\tprops.addNode ||\r\n\t\t\t\tfunction(node) {\r\n\t\t\t\t\tnode.data.children = [\r\n\t\t\t\t\t\t...(node.data.children || []),\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tname: `${node.data.name}.${(node.data.children &&\r\n\t\t\t\t\t\t\t\tnode.data.children.length) ||\r\n                                0}`,\r\n                            id:shortId.generate()\r\n\t\t\t\t\t\t}\r\n                    ];\r\n                    node.data.isExpanded= true;\r\n                    forceRefresh();\r\n\t\t\t\t\treturn node;\r\n\t\t\t\t},\r\n\t\t\tremoveNode:\r\n\t\t\t\tprops.removeNode ||\r\n\t\t\t\tfunction(node) {\r\n                    const parentNode = node.parent;\r\n                    if(!parentNode || !parentNode.data.children)throw `Expected defined parent with defined children but got ${parentNode}`\r\n                    parentNode.data.children = parentNode.data.children.filter(i=>i.name!==node.data.name)\r\n                    parentNode.children = parentNode.children!.filter(i=>i.data.name!==node.data.name)\r\n                    node.parent=null;\r\n\t\t\t\t\treturn parentNode;\r\n\t\t\t\t},\r\n\t\t\texpandNode:\r\n\t\t\t\tprops.expandNode ||\r\n\t\t\t\tfunction(node) {\r\n\t\t\t\t\tif (!node.data.isExpanded) {\r\n\t\t\t\t\t\tnode.data.x0 = node.x;\r\n\t\t\t\t\t\tnode.data.y0 = node.y;\r\n\t\t\t\t\t}\r\n                    node.data.isExpanded = !node.data.isExpanded;\r\n\t\t\t\t\tforceRefresh();\r\n\t\t\t\t\treturn node;\r\n                },\r\n            collapseAll:\r\n                props.collapseAll ||\r\n                function(selector){\r\n                    root.descendants().forEach((i)=>{\r\n                        (i as TreeNode).data.isExpanded=selector===undefined? false : !selector(i as TreeNode); \r\n                        //tried with the pretty way, more readable like this\r\n                    })\r\n                    return root as TreeNode;\r\n                    \r\n                },\r\n            expandAll:\r\n                props.expandAll ||\r\n                function(selector){\r\n                    root.descendants().forEach((i)=>{\r\n                        (i as TreeNode).data.isExpanded=selector===undefined? true : selector(i as TreeNode); \r\n                    })\r\n                    return root as TreeNode;\r\n                }\r\n\r\n\t\t};\r\n    }, [{...props as TreeOperations}]);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div>\r\n\t\t\t\t<label>layout:</label>\r\n\t\t\t\t<select\r\n\t\t\t\t\tonChange={e => setlayout(e.target.value)}\r\n\t\t\t\t\tvalue={layout}\r\n\t\t\t\t>\r\n\t\t\t\t\t<option value=\"cartesian\">cartesian</option>\r\n\t\t\t\t\t<option value=\"polar\">polar</option>\r\n\t\t\t\t</select>\r\n\r\n\t\t\t\t<label>orientation:</label>\r\n\t\t\t\t<select\r\n\t\t\t\t\tonChange={e => setOrientation(e.target.value)}\r\n\t\t\t\t\tvalue={orientation}\r\n\t\t\t\t\tdisabled={layout === \"polar\"}\r\n\t\t\t\t>\r\n\t\t\t\t\t<option value=\"vertical\">vertical</option>\r\n\t\t\t\t\t<option value=\"horizontal\">horizontal</option>\r\n\t\t\t\t</select>\r\n\r\n\t\t\t\t<label>link:</label>\r\n\t\t\t\t<select\r\n\t\t\t\t\tonChange={e => setLinkType(e.target.value)}\r\n\t\t\t\t\tvalue={linkType}\r\n\t\t\t\t>\r\n\t\t\t\t\t<option value=\"diagonal\">diagonal</option>\r\n\t\t\t\t\t<option value=\"step\">step</option>\r\n\t\t\t\t\t<option value=\"curve\">curve</option>\r\n\t\t\t\t\t<option value=\"line\">line</option>\r\n\t\t\t\t\t<option value=\"elbow\">elbow</option>\r\n\t\t\t\t</select>\r\n\r\n\t\t\t\t<label>step:</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"range\"\r\n\t\t\t\t\tmin={0}\r\n\t\t\t\t\tmax={1}\r\n\t\t\t\t\tstep={0.1}\r\n\t\t\t\t\tonChange={e => setStepPercent(Number(e.target.value))}\r\n\t\t\t\t\tvalue={stepPercent}\r\n\t\t\t\t\tdisabled={linkType !== \"step\" || layout === \"polar\"}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\r\n            <svg \r\n                width={effectiveWidth}\r\n                height={effectiveHeight}\r\n            >\r\n\t\t\t\t<LinearGradient id=\"lg\" from=\"#fd9b93\" to=\"#fe6e9e\" />\r\n\t\t\t\t<rect\r\n\t\t\t\t\twidth={effectiveWidth}\r\n\t\t\t\t\theight={effectiveHeight}\r\n\t\t\t\t\trx={14}\r\n                    fill=\"#272b4d\"\r\n                    onClick={(e)=>onCanvasClick&&onCanvasClick(e, operations)}\r\n                    onDoubleClick={(e)=>onCanvasDoubleClick&&onCanvasDoubleClick(e, operations)}\r\n                    onMouseMove={(e)=>onCanvasHover&&onCanvasHover(e, operations)}\r\n                    onMouseEnter={(e)=>onCanvasMouseEnter&&onCanvasMouseEnter(e, operations)}\r\n                    onMouseLeave={(e)=>onCanvasMouseLeave&&onCanvasMouseLeave(e, operations)}\r\n\t\t\t\t/>\r\n\t\t\t\t<Tree\r\n\t\t\t\t\ttop={origin.y}\r\n\t\t\t\t\tleft={origin.x}\r\n\t\t\t\t\troot={root}\r\n\t\t\t\t\tsize={[sizeWidth, sizeHeight]}\r\n\t\t\t\t\tseparation={(a: any, b: any) =>\r\n\t\t\t\t\t\t(a.parent == b.parent ? 1 : 0.5) / a.depth\r\n\t\t\t\t\t}\r\n\t\t\t\t>\r\n\t\t\t\t\t{(data: TreeNode) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Group top={origin.y} left={origin.x}>\r\n\t\t\t\t\t\t\t\t<Links\r\n\t\t\t\t\t\t\t\t\tlinks={data.links()}\r\n\t\t\t\t\t\t\t\t\tlinkType={linkType}\r\n\t\t\t\t\t\t\t\t\tlayout={layout}\r\n\t\t\t\t\t\t\t\t\torientation={orientation}\r\n                                    stepPercent={stepPercent}\r\n                                    selectedRoute={routeSelected}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<Nodes\r\n\t\t\t\t\t\t\t\t\tnodes={data.descendants()}\r\n\t\t\t\t\t\t\t\t\tlayout={layout}\r\n                                    orientation={orientation}\r\n                                    operations={operations}\r\n                                    nodeChildren={nodeChildren}\r\n                                    {...props as NodeEvents}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Group>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}}\r\n\t\t\t\t</Tree>\r\n\t\t\t</svg>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default TreeView;\r\n","import * as React from \"react\";\r\nimport { withStyles, createStyles } from \"@material-ui/core/styles\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport Measure from \"react-measure\";\r\nimport Tree from './Tree';\r\nimport data from \"./data\";\r\nimport { TreeNode, TreeProps } from \"./types\";\r\n\r\nconst styles = createStyles({\r\n\trootDiv: {\r\n\t\tbackgroundColor: \"cyan\",\r\n\t\theight: \"800px\",\r\n\t\twidth: \"800px\",\r\n        alignItems: \"center\",\r\n        resize:\"both\",\r\n        overflow:\"auto\",\r\n        margin:\"24px\"\r\n\t}\r\n});\r\n\r\ninterface ScaledTreeProps extends TreeProps{\r\n    classes:any\r\n}\r\nconst ScaledTree: React.FC<ScaledTreeProps> = (props:ScaledTreeProps) => {\r\n    const [width, setWidth] = React.useState<number>(0);\r\n    const [height, setHeight] = React.useState<number>(0);\r\n\r\n\treturn (\r\n\t\t<Measure bounds onResize={rect=>{\r\n            if(rect.bounds){\r\n                setWidth(rect.bounds.width);\r\n                setHeight(rect.bounds.height);\r\n            }\r\n        }}>\r\n\t\t\t{({ measureRef }) => (\r\n\t\t\t\t<div ref={measureRef} className={props.classes.rootDiv}>\r\n                    <Tree {...props as TreeProps}  width={width-20} height={height-20}/>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</Measure>\r\n\t);\r\n};\r\n\r\nexport default withStyles(styles)(ScaledTree);\r\n","import { TreeProps, TreeNodeData, TreeNode } from \"./types\";\r\nimport React, { FC, useState } from \"react\";\r\nimport Tree from \"./Tree\";\r\nimport ScaledTree from \"./ScaledTree\";\r\nimport data from \"./data\";\r\nimport shortId from \"shortid\";\r\nimport {useSpring, animated} from 'react-spring'\r\nexport { default as ScaledTree } from \"./ScaledTree\";\r\n\r\nconst DefaultView: FC = props => {\r\n\treturn <Tree data={data} width={600} height={500} />;\r\n};\r\n\r\nconst AnimatedPlus: FC = () => {\r\n    const cicleSpring = useSpring({r: 12.5, from: {r:0,}, })\r\n    const plusSpring =useSpring({width:17, height:17, x:4,y:4, from: {width:0, height:0, x:12.5, y:12.5}})\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<animated.circle\r\n\t\t\t\tr={cicleSpring.r}\r\n\t\t\t\tfill=\"cyan\"\r\n\t\t\t\tcx=\"12.5\"\r\n\t\t\t\tcy=\"12.5\"\r\n\t\t\t/>\r\n\t\t\t<animated.svg\r\n\t\t\t\tfill=\"indigo\"\r\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t{...plusSpring}\r\n\t\t\t>\r\n\t\t\t\t<path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\" />\r\n\t\t\t\t<path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n\t\t\t</animated.svg>\r\n\t\t</>\r\n\t);\r\n};\r\nconst AnimatedBin: FC = () => {\r\n    const cicleSpring = useSpring({r: 12.5, from: {r:0,}, })\r\n    const plusSpring =useSpring({width:17, height:17, x:4,y:4, from: {width:0, height:0, x:12.5, y:12.5}})\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<animated.circle\r\n\t\t\t\tr={cicleSpring.r}\r\n\t\t\t\tfill=\"cyan\"\r\n\t\t\t\tcx=\"12.5\"\r\n\t\t\t\tcy=\"12.5\"\r\n\t\t\t/>\r\n\r\n\t\t\t<animated.svg\r\n\t\t\t\tfill=\"red\"\r\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t{...plusSpring}\r\n\t\t\t>\r\n\t\t\t\t<path d=\"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\" />\r\n\t\t\t\t<path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n\t\t\t</animated.svg>\r\n\t\t</>\r\n\t);\r\n};\r\nclass CustomizedView extends React.Component {\r\n    constructor (props:{[key:string]:any}) {\r\n        super(props)\r\n        this.state={\r\n            data:{ name: \"root\", id:shortId.generate() },\r\n            selected:null\r\n        }\r\n    }\r\n    \r\n    state:{\r\n        data:TreeNodeData\r\n        selected:TreeNode|null\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            props,\r\n        } = this;\r\n\r\n        return (\r\n            <ScaledTree\r\n                data={this.state.data}\r\n                onCanvasClick={(e, operations)=>{\r\n                    if(this.state.selected){\r\n                        this.state.selected.data.selected=false;\r\n                    }\r\n                    this.setState({selected:null});\r\n                    operations && operations.expandAll && operations.expandAll();\r\n                }}\r\n                width={600}\r\n                height={500}\r\n                onNodeClick={(e, node, operations) =>{\r\n                    if(this.state.selected){\r\n                        this.state.selected.data.selected=false;\r\n                    }\r\n                    node.data.selected=true;\r\n                    const path:(string|number)[] = [];\r\n                    if(operations && operations.expandNode ){\r\n                        const ancestors = node.ancestors();\r\n                        operations.expandNode&&operations.expandNode(node);\r\n                        operations.collapseAll&&operations.collapseAll((n)=>!ancestors.includes(n as TreeNode));\r\n                    }\r\n                    \r\n                    this.setState({selected:node});\r\n                }}\r\n                nodeChildren={(node, ops) => {\r\n                    if(!node.data.selected)return undefined;\r\n                    const width = node.data.renderWidth || 0;\r\n                    const height = node.data.renderHeight || 0;\r\n\r\n                    return (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t{node.data.selected && (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\twidth=\"25\"\r\n\t\t\t\t\t\t\t\t\t\theight=\"25\"\r\n\t\t\t\t\t\t\t\t\t\tx = {node.depth > 0 ? -(width / 2) - 12.5 : -25 / 2}\r\n\t\t\t\t\t\t\t\t\t\tonClick={ev => {\r\n\t\t\t\t\t\t\t\t\t\t\tev.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\tconst selected = this.state.selected;\r\n\t\t\t\t\t\t\t\t\t\t\tselected!.children = selected!.children || [];\r\n\t\t\t\t\t\t\t\t\t\t\tif (ops.addNode) selected!.children.push(ops.addNode(node));\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\ty = {node.depth>0? 0 : width/2 - 25/2}\r\n\t\t\t\t\t\t\t\t\t>\r\n                                        <AnimatedPlus/>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\r\n\t\t\t\t\t\t\t\t\t{node.depth > 0 && (\r\n\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\twidth=\"25\"\r\n\t\t\t\t\t\t\t\t\t\t\theight=\"25\"\r\n\t\t\t\t\t\t\t\t\t\t\tx={width/2 - 12.5}\r\n\t\t\t\t\t\t\t\t\t\t\ty={0}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={ev => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tev.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst selected = this.state.selected;\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (ops.removeNode && selected) this.setState({selected: ops.removeNode(selected)});\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n                                            <AnimatedBin/>\r\n\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t);\r\n                }}\r\n            />\r\n        );\r\n    }\r\n}\r\nexport default CustomizedView;\r\n","import React from 'react';\r\nimport logo from './logo.svg';\r\nimport TreeView, {ScaledTree}from \"./tree\";\r\nimport './App.css';\r\n\r\nconst App: React.FC = () => {\r\n  return <TreeView/>\r\n}\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}